<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ Agente Financeiro</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f0f0f0; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #333; margin-bottom: 20px; }
        .abas { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #ddd; }
        .aba-btn { padding: 10px 20px; background: #f0f0f0; border: none; cursor: pointer; font-size: 14px; font-weight: bold; }
        .aba-btn.active { background: #667eea; color: white; }
        .secao { display: none; }
        .secao.active { display: block; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px; }
        button { width: 100%; padding: 10px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 10px; }
        button:hover { background: #5568d3; }
        .card { background: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 4px solid #667eea; }
        .card.entrada { border-left-color: #4caf50; }
        .card.saida { border-left-color: #f44336; }
        .resumo { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .resumo-item { background: #f9f9f9; padding: 15px; text-align: center; border-radius: 5px; }
        .resumo-valor { font-size: 20px; font-weight: bold; color: #667eea; }
        .msg { padding: 10px; margin: 10px 0; border-radius: 5px; display: none; }
        .msg.sucesso { background: #d4edda; color: #155724; display: block; }
        .msg.erro { background: #f8d7da; color: #721c24; display: block; }
        .lista { max-height: 300px; overflow-y: auto; }
        .lista-item { padding: 10px; margin: 5px 0; background: #f0f0f0; border-radius: 5px; display: flex; justify-content: space-between; align-items: center; }
        .btn-pequeno { width: auto; padding: 5px 10px; margin: 0; font-size: 12px; }
        .btn-danger { background: #f44336; }
        .btn-success { background: #4caf50; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üí∞ Agente Financeiro Web</h1>
        
        <div class="msg" id="msg"></div>
        
        <div class="abas">
            <button class="aba-btn active" onclick="mudarAba('transacoes')">üìä Transa√ß√µes</button>
            <button class="aba-btn" onclick="mudarAba('relatorio')">üìà Relat√≥rio</button>
            <button class="aba-btn" onclick="mudarAba('contratos')">üìã Contratos</button>
        </div>

        <!-- TRANSA√á√ïES -->
        <div id="transacoes" class="secao active">
            <h2>Resumo</h2>
            <div class="resumo">
                <div class="resumo-item">
                    <div>üìà Entradas</div>
                    <div class="resumo-valor" id="totalEntradas">R$ 0,00</div>
                </div>
                <div class="resumo-item">
                    <div>üìâ Sa√≠das</div>
                    <div class="resumo-valor" id="totalSaidas">R$ 0,00</div>
                </div>
                <div class="resumo-item">
                    <div>üí∞ Saldo</div>
                    <div class="resumo-valor" id="totalSaldo">R$ 0,00</div>
                </div>
            </div>

            <h3>Nova Transa√ß√£o</h3>
            <div class="form-group">
                <label>Tipo:</label>
                <select id="tipo">
                    <option value="entrada">üíµ Entrada</option>
                    <option value="saida">üí∏ Sa√≠da</option>
                </select>
            </div>
            <div class="form-group">
                <label>Descri√ß√£o:</label>
                <input type="text" id="descricao" placeholder="Ex: Sal√°rio, Comida, etc">
            </div>
            <div class="form-group">
                <label>Valor:</label>
                <input type="number" id="valor" step="0.01" placeholder="0,00">
            </div>
            <div class="form-group">
                <label>Categoria:</label>
                <select id="categoria">
                    <option value="geral">Geral</option>
                    <option value="salario">Sal√°rio</option>
                    <option value="alimentacao">Alimenta√ß√£o</option>
                    <option value="transporte">Transporte</option>
                    <option value="outros">Outros</option>
                </select>
            </div>
            <button onclick="adicionarTransacao()">‚úÖ Adicionar</button>

            <h3 style="margin-top: 20px;">Hist√≥rico</h3>
            <div class="lista" id="listaTransacoes"></div>
            <button class="btn-danger" onclick="limparTudo()" style="margin-top: 20px;">üóëÔ∏è Limpar Tudo</button>
        </div>

        <!-- RELAT√ìRIO -->
        <div id="relatorio" class="secao">
            <h2>Relat√≥rio</h2>
            <div class="resumo">
                <div class="resumo-item">
                    <div>üìà Total Entradas</div>
                    <div class="resumo-valor" id="relEntradas">R$ 0,00</div>
                </div>
                <div class="resumo-item">
                    <div>üìâ Total Sa√≠das</div>
                    <div class="resumo-valor" id="relSaidas">R$ 0,00</div>
                </div>
                <div class="resumo-item">
                    <div>üí∞ Saldo Final</div>
                    <div class="resumo-valor" id="relSaldo">R$ 0,00</div>
                </div>
            </div>
            <h3>Por Categoria</h3>
            <div id="porCategoria"></div>
        </div>

        <!-- CONTRATOS -->
        <div id="contratos" class="secao">
            <h2>Contratos</h2>
            
            <h3>Novo Contrato</h3>
            <div class="form-group">
                <label>Cliente:</label>
                <input type="text" id="contratoCliente" placeholder="Nome da empresa">
            </div>
            <div class="form-group">
                <label>Servi√ßo:</label>
                <input type="text" id="contratoServico" placeholder="Ex: Desenvolvimento Web">
            </div>
            <div class="form-group">
                <label>Valor:</label>
                <input type="number" id="contratoValor" step="0.01" placeholder="0,00">
            </div>
            <div class="form-group">
                <label>Vencimento:</label>
                <input type="date" id="contratoVencimento">
            </div>
            <button onclick="adicionarContrato()">‚úÖ Adicionar Contrato</button>

            <h3 style="margin-top: 20px;">Contratos</h3>
            <div id="listaContratos"></div>
        </div>
    </div>

    <script>
        // localStorage
        const TRANSACOES_KEY = 'agente_financeiro_transacoes';
        const CONTRATOS_KEY = 'agente_financeiro_contratos';

        // Carregar dados
        function carregarTransacoes() {
            const dados = localStorage.getItem(TRANSACOES_KEY);
            return dados ? JSON.parse(dados) : [];
        }

        function salvarTransacoes(transacoes) {
            localStorage.setItem(TRANSACOES_KEY, JSON.stringify(transacoes));
        }

        function carregarContratos() {
            const dados = localStorage.getItem(CONTRATOS_KEY);
            return dados ? JSON.parse(dados) : [];
        }

        function salvarContratos(contratos) {
            localStorage.setItem(CONTRATOS_KEY, JSON.stringify(contratos));
        }

        // Formata√ß√£o
        function formatarMoeda(valor) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(valor);
        }

        // Mensagens
        function mostrarMensagem(tipo, texto) {
            const el = document.getElementById('msg');
            el.textContent = texto;
            el.className = 'msg ' + tipo;
            setTimeout(() => el.className = 'msg', 3000);
        }

        // Abas
        function mudarAba(aba) {
            document.querySelectorAll('.secao').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.aba-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(aba).classList.add('active');
            event.target.classList.add('active');
            
            if (aba === 'relatorio') carregarRelatorio();
            if (aba === 'contratos') carregarContratos();
            atualizarResumos();
        }

        // Transa√ß√µes
        function adicionarTransacao() {
            const tipo = document.getElementById('tipo').value;
            const descricao = document.getElementById('descricao').value;
            const valor = parseFloat(document.getElementById('valor').value);
            const categoria = document.getElementById('categoria').value;

            if (!descricao || !valor || valor <= 0) {
                mostrarMensagem('erro', '‚ùå Preencha todos os campos!');
                return;
            }

            const transacoes = carregarTransacoes();
            transacoes.push({
                id: Date.now(),
                tipo, descricao, valor, categoria,
                data: new Date().toLocaleDateString('pt-BR')
            });

            salvarTransacoes(transacoes);
            mostrarMensagem('sucesso', '‚úÖ Transa√ß√£o adicionada!');
            
            document.getElementById('descricao').value = '';
            document.getElementById('valor').value = '';
            
            atualizarResumos();
            renderizarTransacoes();
        }

        function atualizarResumos() {
            const transacoes = carregarTransacoes();
            const entradas = transacoes.filter(t => t.tipo === 'entrada').reduce((acc, t) => acc + t.valor, 0);
            const saidas = transacoes.filter(t => t.tipo === 'saida').reduce((acc, t) => acc + t.valor, 0);
            const saldo = entradas - saidas;

            document.getElementById('totalEntradas').textContent = formatarMoeda(entradas);
            document.getElementById('totalSaidas').textContent = formatarMoeda(saidas);
            document.getElementById('totalSaldo').textContent = formatarMoeda(saldo);
        }

        function renderizarTransacoes() {
            const transacoes = carregarTransacoes();
            if (transacoes.length === 0) {
                document.getElementById('listaTransacoes').innerHTML = '<p style="text-align: center; color: #999;">Nenhuma transa√ß√£o</p>';
                return;
            }
            
            document.getElementById('listaTransacoes').innerHTML = transacoes.map(t => `
                <div class="lista-item ${t.tipo}">
                    <div>
                        <strong>${t.descricao}</strong><br>
                        <small>${t.data} ‚Ä¢ ${t.categoria}</small>
                    </div>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <strong>${formatarMoeda(t.valor)}</strong>
                        <button class="btn-pequeno btn-danger" onclick="deletarTransacao(${t.id})">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');
        }

        function deletarTransacao(id) {
            let transacoes = carregarTransacoes();
            transacoes = transacoes.filter(t => t.id !== id);
            salvarTransacoes(transacoes);
            atualizarResumos();
            renderizarTransacoes();
        }

        function limparTudo() {
            if (confirm('‚ö†Ô∏è Deletar TUDO?')) {
                if (confirm('Confirma novamente?')) {
                    localStorage.clear();
                    atualizarResumos();
                    renderizarTransacoes();
                    carregarRelatorio();
                    mostrarMensagem('sucesso', '‚úÖ Dados deletados!');
                }
            }
        }

        // Relat√≥rio
        function carregarRelatorio() {
            const transacoes = carregarTransacoes();
            const entradas = transacoes.filter(t => t.tipo === 'entrada').reduce((acc, t) => acc + t.valor, 0);
            const saidas = transacoes.filter(t => t.tipo === 'saida').reduce((acc, t) => acc + t.valor, 0);

            document.getElementById('relEntradas').textContent = formatarMoeda(entradas);
            document.getElementById('relSaidas').textContent = formatarMoeda(saidas);
            document.getElementById('relSaldo').textContent = formatarMoeda(entradas - saidas);

            // Por categoria
            const categorias = {};
            transacoes.forEach(t => {
                if (!categorias[t.categoria]) categorias[t.categoria] = { entrada: 0, saida: 0 };
                if (t.tipo === 'entrada') categorias[t.categoria].entrada += t.valor;
                else categorias[t.categoria].saida += t.valor;
            });

            const html = Object.entries(categorias).map(([cat, vals]) => `
                <div class="card">
                    <strong>${cat}</strong><br>
                    Entradas: ${formatarMoeda(vals.entrada)}<br>
                    Sa√≠das: ${formatarMoeda(vals.saida)}
                </div>
            `).join('');

            document.getElementById('porCategoria').innerHTML = html || '<p style="color: #999;">Sem dados</p>';
        }

        // Contratos
        function adicionarContrato() {
            const cliente = document.getElementById('contratoCliente').value;
            const servico = document.getElementById('contratoServico').value;
            const valor = parseFloat(document.getElementById('contratoValor').value);
            const vencimento = document.getElementById('contratoVencimento').value;

            if (!cliente || !servico || !valor || !vencimento) {
                mostrarMensagem('erro', '‚ùå Preencha todos os campos!');
                return;
            }

            const contratos = carregarContratos();
            contratos.push({
                id: Date.now(),
                cliente, servico, valor, vencimento,
                status: 'pendente'
            });

            salvarContratos(contratos);
            mostrarMensagem('sucesso', '‚úÖ Contrato adicionado!');
            
            document.getElementById('contratoCliente').value = '';
            document.getElementById('contratoServico').value = '';
            document.getElementById('contratoValor').value = '';
            document.getElementById('contratoVencimento').value = '';
            
            renderizarContratos();
        }

        function renderizarContratos() {
            const contratos = carregarContratos();
            if (contratos.length === 0) {
                document.getElementById('listaContratos').innerHTML = '<p style="text-align: center; color: #999;">Nenhum contrato</p>';
                return;
            }

            document.getElementById('listaContratos').innerHTML = contratos.map(c => `
                <div class="card">
                    <strong>${c.cliente}</strong> - ${c.servico}<br>
                    Valor: <strong>${formatarMoeda(c.valor)}</strong><br>
                    Vencimento: ${c.vencimento}<br>
                    Status: <span style="color: ${c.status === 'pago' ? 'green' : 'red'}">${c.status}</span><br>
                    <button class="btn-pequeno btn-success" onclick="marcarPago(${c.id})">‚úÖ Pago</button>
                    <button class="btn-pequeno btn-danger" onclick="deletarContrato(${c.id})">üóëÔ∏è</button>
                </div>
            `).join('');
        }

        function marcarPago(id) {
            let contratos = carregarContratos();
            const contrato = contratos.find(c => c.id === id);
            if (contrato) {
                contrato.status = 'pago';
                salvarContratos(contratos);
                renderizarContratos();
            }
        }

        function deletarContrato(id) {
            let contratos = carregarContratos();
            contratos = contratos.filter(c => c.id !== id);
            salvarContratos(contratos);
            renderizarContratos();
        }

        // Inicializar
        window.addEventListener('DOMContentLoaded', () => {
            atualizarResumos();
            renderizarTransacoes();
        });
    </script>
</body>
</html>
